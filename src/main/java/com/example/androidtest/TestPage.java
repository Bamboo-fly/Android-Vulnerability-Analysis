package com.example.androidtest;

import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXMLLoader;
import javafx.geometry.Side;
import javafx.scene.Scene;
import javafx.scene.chart.PieChart;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.Tab;
import javafx.scene.control.TabPane;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.AnchorPane;
import javafx.scene.layout.Background;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.StackPane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Circle;
import javafx.stage.Stage;

import java.io.IOException;

public class TestPage extends AnchorPane {
    private static TestPage testPage;
    private Stage stage;

    private TestPage() throws IOException{
//            FXMLLoader fxmlLoader = new FXMLLoader(HelloApplication.class.getResource("hello-view.fxml"));
//            stage = new Stage();
//            stage.setTitle("FOO管理");
//            stage.setScene(new Scene(fxmlLoader.load(), 500, 250));

            stage = new Stage();

            PieChart pieChart = new PieChart();
            pieChart.setData(getChartData());
            pieChart.setTitle("Title");
            pieChart.setLegendSide(Side.LEFT);
            pieChart.setClockwise(false);
            pieChart.setLabelsVisible(false);
            StackPane root = new StackPane();
            root.getChildren().add(pieChart);


            FXMLLoader fxmlLoader = new FXMLLoader(HelloApplication.class.getResource("load-view.fxml"));
            //创建选项卡面板
            TabPane tabPane = new TabPane();
            //创建不带标题的选项卡标题
            Tab tab1 = new Tab();
            tab1.setText("apk应用导入");
            //设置选项卡tab1不可被关闭
            tab1.setClosable(false);
            //将圆添加到选项卡tab1上
            tab1.setContent(fxmlLoader.load());


            Tab tab2 = new Tab("分析记录");
            tab2.setClosable(false);
            FXMLLoader fxmlLoader2 = new FXMLLoader(HelloApplication.class.getResource("analyse-view2.fxml"));
            tab2.setContent(fxmlLoader2.load());
            Scene scene = new Scene(tabPane,800,500);
            //将两个选项卡添加到选项卡面板上
            tabPane.getTabs().addAll(tab1,tab2);

            stage.setTitle("安卓隐私检测平台");
            stage.getIcons().add(new Image("E:\\FXproject\\demo\\src\\main\\resources\\com.example.img\\img.png"));
            stage.setScene(scene);
    }

    private ObservableList<PieChart.Data> getChartData() {
        ObservableList<PieChart.Data> answer = FXCollections.observableArrayList();
        answer.addAll(new PieChart.Data("java", 17),
                new PieChart.Data("JavaFx",31),
                new PieChart.Data("Swing",10),
                new PieChart.Data("IO",20),
                new PieChart.Data("NIO",21)
        );
        return answer;
    }

    public Stage getStage() {
        return this.stage;
    }

    // 外部调用方法
    public static void showFooPane() {
        try {
            testPage = new TestPage(); // 构造实例
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
        testPage.getStage().show(); // 显示页面
    }
}
